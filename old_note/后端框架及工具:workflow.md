概念
有限状态机(FSM): 是应对与状态驱动的业务场景的一种软件设计方法
工作流引擎: 是对业务规则,工作流程领域的抽象, 实现了一整套领域内可能遇到的问题的解决方案.

实现
状态机:

任何的状态转化都 可以描述成, 当前状态s,接收到一个状态转化事件E, 执行动作 A,最终将状态转化为S', 用公式描述则为: F(S, E) -> (A, S')
开源实现 squirrel (https://github.com/hekailiang/squirrel) 主要的api:
StateMachine: 是一个状态转化描述文件,类似于一个门面对象,类似于一般框架中的XXXManager
State: 状态枚举类
Event: 状态转化事件对象.
Context: 状态转化数据对象
状态模式:
实现思路其实就是利用多态,将原先过程式的代码(if else)将每个状态分别用一个具体的状态类维护. 便于扩展和维护. note: 状态类可以定义通用的模板,便于状态操作复用, 如fba订单状态