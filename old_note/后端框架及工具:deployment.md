### nginx
nginx 反向代理,动静分离，静态文件做缓存，提高效率

配合keepalived 实现高可用

keepalived 是基于 vrrp (虚拟路由冗余协议) 协议 管理路由集群(比如nginx集群)的一种高可用方案。 既然是集群管理原件，就涉及到master 选举的问题。主要也是通过发送广播心跳包来确认是否alive。 引用：http://seanlook.com/2015/05/18/nginx-keepalived-ha/ 

**nginx 的负载均衡的几种方式(主要通过proxyPass 配置选项配置)**：

1. 论询（一个轮完另一个，配合加权）    
2. session 绑定( 同一个会话的请求路由到同一个realServer上。现在都是基于token，应该用的比较少吧？)  
3. 地址hash (看hash算法怎么设计)  
4. 另外还可根据机器的实际情况，实现动态负载均衡,有个支持动态扩展的选项，叫做fastcgi

### lvs

lvs(linux virtual server)： 国内开源的集群负载均衡解决方案
作用与网络协议的传输层（4层）。nginx 是应用层（7层）的负载均衡。 所谓的4层和7层可以这么理解。
输入 -> lvs(路由) -> 真实机器。 对于传输层 输入 只能是 ip 或 vip 和端口，对于 应用层，输入就可以是url，相对而言，输入说包含的信息也就多一点，比如包含浏览器类型。故所能做的事情也就越多一点，可以实现更复杂的负载均衡逻辑

### 微服务场景常用的组件及高可用方案：

### 分布式缓存部署方案：

redis 集群方式：
a.基于客户端： 即一致性hash的逻辑放在各个客户端中  
b.基于代理 codis   
c.基于redis cluster，协议变化较大，许多客户端并不支持     

### mysql 部署方案  
1. 一主多备，主备同步。缺点故障转移不灵活，需要手动控制； 也是基于binlog 日志来实现的  
2. 主主其实也是在主备的前提下两边都配置了slave   
3. 配合 HAProxy 做slave 的负载均衡。 有个web服务模块可以看   
4. 实现高可用： 主要围绕 写节点 利用keepalived实现高可用     
5. 拆库拆表：逻辑拆分分为 垂直/水平拆分，同一个表字段拆成多个表，也叫做水平拆分； 物理拆分：mysql 的同一个数据库文件可拆分成多个
   5.1. mysql本身支持分区表，所谓分区表即逻辑上操作的是一个表，但是mysql实际在存储数据的时候是按照多个数据文件存储的(多个idb文件)   
   5.2. mysql 支持  range， list，hash，key 4种方式来分区，即在建分区表的时候可以指定区分的策略   
      
6. mycat 分库分表： 配合keepalived 做高可用，keepalived 可以理解成一个心跳包client




